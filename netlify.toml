# Settings in the [build] context are global and are applied to all contexts
# unless otherwise overridden by more specific contexts.
[build]
  command = "./hack/build.sh"
  publish = "site"

[build.environment]
  NODE_VERSION= "22"
  PYTHON_VERSION = "3.13"

[[plugins]]
package = "@netlify/plugin-sitemap"

  [plugins.inputs]
  prettyURLs = true
  # The trailing slash is needed for MkDocs navigation
  trailingSlash = true

# Deploy Preview context: all deploys generated from a pull/merge request will
# inherit these settings.
[context.deploy-preview]
  publish = "site"

# Envvars for deploy preview
[context.deploy-preview.environment]
  BUILD_VERSIONS="no"

[[redirects]]
  from = "/contributing/"
  to = "/community/contributing/"
  status = 301

[[redirects]]
  from = "/community/*"
  to = "/docs/community/"
  status = 301

[[redirects]]
  from = "/docs/help/contributor/*"
  to = "https://github.com/knative/docs/blob/main/contribute-to-docs/README.md"
  status = 301

